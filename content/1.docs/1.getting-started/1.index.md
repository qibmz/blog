---
title: 区块链相关(前端)
description: 涉及前端连接钱包,签名,读写合约等.
navigation:
  icon: i-lucide-box
---

# 区块链前端开发常用库

## Web3.js

`web3.js` 是一个广泛使用的 Ethereum JavaScript API 库，允许开发者与以太坊区块链进行交互。

### 主要功能

- 连接以太坊节点
- 发送交易和查询链上数据
- 智能合约交互
- 账户管理

### 基本用法示例

```javascript
import Web3 from 'web3';

// 连接到钱包提供商
const web3 = new Web3(window.ethereum);

// 获取账户地址
const accounts = await web3.eth.getAccounts();

// 调用智能合约
const contract = new web3.eth.Contract(abi, contractAddress);

```

---

### 官方文档

- [Wagmi 官方文档](https://wagmi.sh){target="_blank"}
- [GitHub 仓库](https://github.com/wagmi-dev/wagmi){target="_blank"}

## Wagmi

`wagmi` 是一个基于 `React` 的区块链开发工具库，兼容`Javascript`，`Vue`，简化了与 EVM 兼容链的交互逻辑，内置了常见的区块链操作钩子，支持多链和钱包集成。

### 主要功能

- 基于 React Hooks 的 API 设计，简化状态管理
- 内置钱包连接（MetaMask、Coinbase Wallet 等）
- 智能合约交互封装（读 / 写操作、事件监听）
- 多链支持与链切换管理
- 交易状态跟踪与错误处理

### 安装(以Vue为示例)

::code-group

```bash [pnpm]
pnpm add @wagmi/vue viem@2.x @tanstack/vue-query
```

```bash [npm]
npm install @wagmi/vue viem@2.x @tanstack/vue-query
```

```bash [yarn]
yarn add @wagmi/vue viem@2.x @tanstack/vue-query
```

```bash [bun]
bun add @wagmi/vue viem@2.x @tanstack/vue-query
```

::

- [Viem](https://viem.sh){target="_blank"} 是以太坊的TypeScript接口，用于执行区块链操作。
- [TanStack Query](https://tanstack.com/query/v5){target="_blank"} 是一个处理请求、缓存等的Apache状态管理器。
- [TypeScript](https://wagmi.sh/vue/typescript){target="_blank"
  }是可选的，但强烈推荐。了解更多关于[TypeScript support](https://wagmi.sh/vue/typescript){target="_blank"} .

#### 将插件添加到应用程序
::code-tree{defaultValue="plugins/wagmiConfig.ts"}



```ts [plugins/wagmiConfig.ts]
import { createConfig, http } from '@wagmi/vue'
import { mainnet, sepolia } from '@wagmi/vue/chains'

export const config = createConfig({
  chains: [mainnet, sepolia],
  transports: {
    [mainnet.id]: http(),
    [sepolia.id]: http(),
  },
})
```

```ts [main.ts]
import { QueryClient, VueQueryPlugin } from '@tanstack/vue-query'
import { WagmiPlugin } from '@wagmi/vue'
import { createApp } from 'vue'
import { config } from './plugins/wagmiConfig'
import App from './App.vue'

const queryClient = new QueryClient()

createApp(App)
        .use(WagmiPlugin, { config })
        .use(VueQueryPlugin, { queryClient })
        .mount('#app')
```
::

查看 [WagmiPlugin文档](https://wagmi.sh/vue/api/WagmiPlugin){target="_blank"} 以了解有关插件API的更多信息.

### 基本用法示例
#### 获取用户钱包地址
```vue
<script setup lang="ts">
  import { useAccount, useEnsName } from '@wagmi/vue'

  const { address } = useAccount() //获取用户连接账号
  const { data, error, status } = useEnsName({ address })
</script>

<template>
  <div v-if="status === 'pending'">Loading ENS name</div>
  <div v-else-if="status === 'error'">
    Error fetching ENS name: {{error.message}}
  </div>
  <div v-else>ENS name: {{data}}</div>
</template>
```
#### 智能合约交互
::code-group
```vue [ReadContract.vue]
<script setup lang="ts">
  import { useReadContract } from 'wagmi'
  import { wagmiContractConfig } from './contracts'
//读取用户账户的地址为0x03A71968491d55603FFe1b11A9e23eF013f75bCF代币余额
  const { data: balance } = useReadContract({
    ...wagmiContractConfig,
    functionName: 'balanceOf',
    args: ['0x03A71968491d55603FFe1b11A9e23eF013f75bCF'],
  })
</script>

<template>
  <div>Balance: {{ balance?.toString() }}</div>
</template>
```
```ts [contracts.ts]
export const wagmiContractConfig = {
address: '0xFBA3912Ca04dd458c843e2EE08967fC04f3579c2',
abi: [
{
type: 'function',
name: 'balanceOf',
stateMutability: 'view',
inputs: [{ name: 'account', type: 'address' }],
outputs: [{ type: 'uint256' }],
},
{
type: 'function',
name: 'totalSupply',
stateMutability: 'view',
inputs: [],
outputs: [{ name: 'supply', type: 'uint256' }],
},
],
} as const
```

```vue [WriteContract.vue]
<script setup lang="ts">
  import {
    useWaitForTransactionReceipt,
    useWriteContract
  } from 'wagmi'
  import { abi } from './abi'

  const {
    data: hash,
    isPending,
    writeContract
  } = useWriteContract()

  function submit(event: Event) {
    const formData = new FormData(e.target as HTMLFormElement)
    const tokenId = formData.get('tokenId') as string
    //0xFBA3912Ca04dd458c843e2EE08967fC04f3579c2为合约地址 调用mint方法 参数为tokenId
    writeContract({
      address: '0xFBA3912Ca04dd458c843e2EE08967fC04f3579c2',
      abi,
      functionName: 'mint',
      args: [BigInt(tokenId)],
    })
  }

  const { isLoading: isConfirming, isSuccess: isConfirmed } =
          useWaitForTransactionReceipt({
            hash,
          })
</script>

<template>
<form @submit.prevent="submit">
  <input name="tokenId" placeholder="69420" required />
  <button :disabled="isPending" type="submit">
    <span v-if="isPending">Sending...</span>
    <span v-else>Send</span>
  </button>
  <div v-if="hash">Transaction Hash: {{ hash }}</div>
  <div v-if="isConfirming">Waiting for confirmation...</div>
  <div v-if="isConfirmed">Transaction Confirmed!</div>
</form>
</template>
```
```ts [abi.ts]
export const abi = [
  {
    name: 'mint',
    type: 'function',
    stateMutability: 'nonpayable',
    inputs: [{ internalType: 'uint32', name: 'tokenId', type: 'uint32' }],
    outputs: [],
  },
] as const
```
::
### 官方文档

- [Wagmi 官方文档](https://wagmi.sh){target="_blank"}
- [GitHub 仓库](https://github.com/wagmi-dev/wagmi){target="_blank"}


## Reown


`Reown`使构建者能够创建安全，用户友好和富有洞察力的钱包和应用程序UX。提供所有工具，以更快地启动和更智能地扩展。


### 主要功能
- 支持多种钱包的无缝连接
- 提供标准化的连接流程
- 支持移动端和桌面端钱包
- 管理多个应用的连接会话
- 提供会话状态的实时同步
- 支持会话的持久化存储
- 支持主流区块链网络


### 安装(以Vue+wagmi为示例)


::code-group

```bash [pnpm]
pnpm add @reown/appkit @reown/appkit-adapter-wagmi @tanstack/vue-query @wagmi/vue viem
```

```bash [yarn]
yarn add @@reown/appkit @reown/appkit-adapter-wagmi @tanstack/vue-query @wagmi/vue viem
```

```bash [npm]
npm install @reown/appkit @reown/appkit-adapter-wagmi @tanstack/vue-query @wagmi/vue viem
```

```bash [bun]
bun add @reown/appkit @reown/appkit-adapter-wagmi @tanstack/vue-query @wagmi/vue viem
```

::

### 申请ProjectId

::card{title="获取ProjectId" icon="i-lucide-layout-dashboard" color="primary" to="https://dashboard.reown.com/" target="_blank"}
前往Reown仪表板并立即创建一个新项目！
::
#### 申请ProjectId

在Reown仪表板上创建新项目，  
并获取新的项目ID。

#### 将插件添加到应用程序
::code-tree{defaultValue="plugins/wagmiConfig.ts"}



```ts [plugins/wagmiConfig.ts]
import type { AppKitNetwork } from '@reown/appkit/networks'

import { WagmiAdapter } from '@reown/appkit-adapter-wagmi'
import { bsc, bscTestnet } from '@reown/appkit/networks'

export const projectId = import.meta.env.VITE_PROJECT_ID

export const metadata = {
  name: 'AppKit',
  description: 'AppKit Example',
  url: 'http://192.168.0.209:9001',
  icons: ['https://avatars.githubusercontent.com/u/179229932'],
}
// 3. Set the networks
export const network = import.meta.env.MODE === 'production' ? bsc : bscTestnet
export const networks: [AppKitNetwork, ...AppKitNetwork[]] = [network]

// 4. Create Wagmi Adapter
export const wagmiAdapter = new WagmiAdapter({
  networks,
  projectId,
})

```
```vue [app.vue]

<script lang="ts" setup>
  import {createAppKit} from '@reown/appkit/vue'
  import {metadata, networks, projectId, wagmiAdapter} from './plugins/wagmiConfig'

  const modal = createAppKit({
    adapters: [wagmiAdapter],
    networks,
    projectId,
    metadata,
    features: {
      email: false,
      analytics: true,
      socials: [],
    },

    enableReconnect: true,
// --w3m-font-family基本字体系列string
// --w3m-accent用于按钮、图标、标签等的颜色。string
// --w3m-color-mix与默认颜色混合的颜色string
// --w3m-color-mix-strength“—w3m-color-mix” 应该混合的百分比number
// --w3m-font-size-master字体的基本像素大小。string
// --w3m-border-radius-master基本边框半径（以像素为单位）。string
// --w3m-z-index模态框的 z-index。number
    themeVariables: {
      '--w3m-accent': '#00BB7F',
      '--w3m-font-size-master': '10px',
    },
  })
</script>
<template></template>
```

```ts [main.ts]
import { QueryClient, VueQueryPlugin } from '@tanstack/vue-query'
import { WagmiPlugin } from '@wagmi/vue'
import { createApp } from 'vue'
import { VueQueryPlugin } from '@tanstack/vue-query'
import { WagmiPlugin } from '@wagmi/vue'
import App from './App.vue'
import { wagmiAdapter } from './plugins/wagmiConfig'

const queryClient = new QueryClient()

createApp(App)
app.use(VueQueryPlugin)
app.use(WagmiPlugin, { config: wagmiAdapter.wagmiConfig })
        .mount('#app')
```
::

查看 [WagmiPlugin文档](https://wagmi.sh/vue/api/WagmiPlugin){target="_blank"} 以了解有关插件API的更多信息.

要打开AppKit，可以使用Reown的[web组件](https://docs.reown.com/appkit/vue/core/components){target="_blank"}
或使用AppKit构建自己的按钮[自定义组件](https://docs.reown.com/appkit/vue/core/composables#useAppKit){target="_blank"}
在本例中，我们将使用<appkit-button>组件
Web组件是不需要导入的全局html元素

``` vue
<template>
  <appkit-button />
</template>
```


#### 获取用户钱包地址
import { useAppKitAccount } from '@reown/appkit/vue'
const accountData = useAppKitAccount()

``` vue
<script setup lang="ts">

</script>
<template>
  <appkit-button />
</template>
```

#### 智能合约交互


``` vue
<script setup lang="ts">
  import { readContract } from "@wagmi/core";
  import {erc20Abi} from 'viem'

  const USDTAddress = "0x...";

  const data = readContract({
    abi: erc20Abi,
    address: USDTAddress,
    functionName: "symbol",
  });
</script>
```

### 官方文档

- [Reown 官方文档](https://docs.reown.com/overview){target="_blank"}
- [GitHub 仓库](https://github.com/reown-com/appkit){target="_blank"}
